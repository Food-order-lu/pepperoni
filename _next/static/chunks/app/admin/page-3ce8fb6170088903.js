(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8079:function(e,a,n){Promise.resolve().then(n.bind(n,6683))},6683:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return o}});var s=n(7437),i=n(2265),r=n(7356),l=n.n(r);function o(){let[e,a]=(0,i.useState)(!1),[n,r]=(0,i.useState)(""),[o,t]=(0,i.useState)(""),[u,c]=(0,i.useState)(""),[p,d]=(0,i.useState)(!1),[_,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{"true"===sessionStorage.getItem("pepperoni_admin")&&a(!0);let e=localStorage.getItem("pepperoni_menu_url");e&&c(e)},[]);let g=async e=>{var a;let n=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!n)return;d(!0),m(!1);let s=new FormData;s.append("file",n),s.append("upload_preset","Menu de la semaine pepperoni");try{let e=await fetch("https://api.cloudinary.com/v1_1/".concat("dsk1mj71x","/image/upload"),{method:"POST",body:s}),a=await e.json();a.secure_url?(c(a.secure_url),localStorage.setItem("pepperoni_menu_url",a.secure_url),m(!0)):t("Erreur lors de l'upload. V\xe9rifiez la configuration Cloudinary.")}catch(e){t("Erreur de connexion. R\xe9essayez."),console.error(e)}finally{d(!1)}};return e?(0,s.jsx)("div",{className:l().container,children:(0,s.jsxs)("div",{className:l().adminPanel,children:[(0,s.jsxs)("div",{className:l().header,children:[(0,s.jsx)("h1",{children:"\uD83C\uDF55 Gestion du Menu"}),(0,s.jsx)("button",{onClick:()=>{a(!1),sessionStorage.removeItem("pepperoni_admin")},className:l().logoutBtn,children:"D\xe9connexion"})]}),(0,s.jsxs)("div",{className:l().uploadSection,children:[(0,s.jsx)("h2",{children:"\uD83D\uDCCB Menu de la Semaine"}),(0,s.jsx)("p",{children:"Uploadez une nouvelle image pour mettre \xe0 jour le menu affich\xe9 sur le site."}),(0,s.jsxs)("label",{className:l().uploadLabel,children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:g,className:l().fileInput}),(0,s.jsx)("span",{className:l().uploadBtn,children:p?"⏳ Upload en cours...":"\uD83D\uDCE4 Choisir une image"})]}),_&&(0,s.jsx)("div",{className:l().success,children:"✅ Image mise \xe0 jour avec succ\xe8s !"})]}),(0,s.jsxs)("div",{className:l().previewSection,children:[(0,s.jsx)("h3",{children:"Aper\xe7u actuel"}),u?(0,s.jsx)("img",{src:u,alt:"Menu de la semaine",className:l().previewImage}):(0,s.jsx)("div",{className:l().noImage,children:"Aucune image de menu upload\xe9e"})]})]})}):(0,s.jsx)("div",{className:l().container,children:(0,s.jsxs)("div",{className:l().loginCard,children:[(0,s.jsx)("div",{className:l().logo,children:"\uD83C\uDF55"}),(0,s.jsx)("h1",{children:"Administration Pepperoni"}),(0,s.jsx)("p",{children:"Connectez-vous pour g\xe9rer le menu de la semaine"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"Pepperoni2022"===n?(a(!0),sessionStorage.setItem("pepperoni_admin","true"),t("")):t("Mot de passe incorrect")},className:l().form,children:[(0,s.jsx)("input",{type:"password",placeholder:"Mot de passe",value:n,onChange:e=>r(e.target.value),className:l().input}),o&&(0,s.jsx)("p",{className:l().error,children:o}),(0,s.jsx)("button",{type:"submit",className:l().button,children:"Se connecter"})]})]})})}},7356:function(e){e.exports={container:"page_container__bKlsu",loginCard:"page_loginCard__g_zoW",logo:"page_logo__2iuHa",form:"page_form__0FWwx",input:"page_input__LzCRz",button:"page_button__XbX_N",error:"page_error__J8EiX",adminPanel:"page_adminPanel__93XMV",header:"page_header__GFEq6",logoutBtn:"page_logoutBtn__Qx2MZ",uploadSection:"page_uploadSection___HSuz",uploadLabel:"page_uploadLabel__3b4XN",fileInput:"page_fileInput__ndibQ",uploadBtn:"page_uploadBtn__Ghf4O",success:"page_success__wK9AJ",previewSection:"page_previewSection__BL4tO",previewImage:"page_previewImage__CIkTb",noImage:"page_noImage__52vm3"}}},function(e){e.O(0,[491,971,117,744],function(){return e(e.s=8079)}),_N_E=e.O()}]);