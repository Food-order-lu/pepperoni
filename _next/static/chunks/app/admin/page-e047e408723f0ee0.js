(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8079:function(e,a,n){Promise.resolve().then(n.bind(n,6683))},6683:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return l}});var r=n(7437),s=n(2265),t=n(6410),i=n(7356),o=n.n(i);function l(){let[e,a]=(0,s.useState)(!1),[n,i]=(0,s.useState)(""),[l,u]=(0,s.useState)(""),[c,p]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),[_,g]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{"true"===sessionStorage.getItem("pepperoni_admin")&&a(!0),(async()=>{let e=await (0,t.N)();e&&p(e),f(!1)})()},[]);let v=async e=>{var a;let n=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!n)return;m(!0),g(!1),u("");let r=new FormData;r.append("file",n),r.append("upload_preset","Menu de la semaine pepperoni");try{let e=await fetch("https://api.cloudinary.com/v1_1/".concat("dsk1mj71x","/image/upload"),{method:"POST",body:r}),a=await e.json();a.secure_url?await (0,t.v)(a.secure_url)?(p(a.secure_url),g(!0)):u("Image upload\xe9e mais erreur lors de la sauvegarde. R\xe9essayez."):u("Erreur lors de l'upload. V\xe9rifiez la configuration Cloudinary.")}catch(e){u("Erreur de connexion. R\xe9essayez."),console.error(e)}finally{m(!1)}};return e?(0,r.jsx)("div",{className:o().container,children:(0,r.jsxs)("div",{className:o().adminPanel,children:[(0,r.jsxs)("div",{className:o().header,children:[(0,r.jsx)("h1",{children:"\uD83C\uDF55 Gestion du Menu"}),(0,r.jsx)("button",{onClick:()=>{a(!1),sessionStorage.removeItem("pepperoni_admin")},className:o().logoutBtn,children:"D\xe9connexion"})]}),(0,r.jsxs)("div",{className:o().uploadSection,children:[(0,r.jsx)("h2",{children:"\uD83D\uDCCB Menu de la Semaine"}),(0,r.jsx)("p",{children:"Uploadez une nouvelle image pour mettre \xe0 jour le menu affich\xe9 sur le site."}),(0,r.jsx)("p",{className:o().infoText,children:"✨ L'image sera visible par tous les visiteurs du site !"}),(0,r.jsxs)("label",{className:o().uploadLabel,children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:v,className:o().fileInput,disabled:d}),(0,r.jsx)("span",{className:o().uploadBtn,children:d?"⏳ Upload en cours...":"\uD83D\uDCE4 Choisir une image"})]}),l&&(0,r.jsxs)("div",{className:o().errorBox,children:["❌ ",l]}),_&&(0,r.jsx)("div",{className:o().success,children:"✅ Image mise \xe0 jour avec succ\xe8s ! Tous les visiteurs peuvent maintenant la voir."})]}),(0,r.jsxs)("div",{className:o().previewSection,children:[(0,r.jsx)("h3",{children:"Aper\xe7u actuel"}),h?(0,r.jsx)("div",{className:o().noImage,children:"Chargement..."}):c?(0,r.jsx)("img",{src:c,alt:"Menu de la semaine",className:o().previewImage}):(0,r.jsx)("div",{className:o().noImage,children:"Aucune image de menu upload\xe9e"})]})]})}):(0,r.jsx)("div",{className:o().container,children:(0,r.jsxs)("div",{className:o().loginCard,children:[(0,r.jsx)("div",{className:o().logo,children:"\uD83C\uDF55"}),(0,r.jsx)("h1",{children:"Administration Pepperoni"}),(0,r.jsx)("p",{children:"Connectez-vous pour g\xe9rer le menu de la semaine"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"Pepperoni2022"===n?(a(!0),sessionStorage.setItem("pepperoni_admin","true"),u("")):u("Mot de passe incorrect")},className:o().form,children:[(0,r.jsx)("input",{type:"password",placeholder:"Mot de passe",value:n,onChange:e=>i(e.target.value),className:o().input}),l&&(0,r.jsx)("p",{className:o().error,children:l}),(0,r.jsx)("button",{type:"submit",className:o().button,children:"Se connecter"})]})]})})}},6410:function(e,a,n){"use strict";n.d(a,{N:function(){return l},v:function(){return o}});var r=n(738),s=n(5978);let t=(0,r.ZF)({apiKey:"AIzaSyDjFl9aA4B8dtMmhBCfzp7L1VgWaUYOa7U",authDomain:"pepperoni-menu.firebaseapp.com",projectId:"pepperoni-menu",storageBucket:"pepperoni-menu.firebasestorage.app",messagingSenderId:"99813985360",appId:"1:99813985360:web:1d226c62a52c49f51a5555",measurementId:"G-R7FVEX4T7E"}),i=(0,s.ad)(t);async function o(e){try{return await (0,s.pl)((0,s.JU)(i,"settings","menu"),{imageUrl:e,updatedAt:new Date().toISOString()}),!0}catch(e){return console.error("Erreur lors de la sauvegarde:",e),!1}}async function l(){try{let e=await (0,s.QT)((0,s.JU)(i,"settings","menu"));if(e.exists())return e.data().imageUrl;return null}catch(e){return console.error("Erreur lors du chargement:",e),null}}},7356:function(e){e.exports={container:"page_container__bKlsu",loginCard:"page_loginCard__g_zoW",logo:"page_logo__2iuHa",form:"page_form__0FWwx",input:"page_input__LzCRz",button:"page_button__XbX_N",error:"page_error__J8EiX",adminPanel:"page_adminPanel__93XMV",header:"page_header__GFEq6",logoutBtn:"page_logoutBtn__Qx2MZ",uploadSection:"page_uploadSection___HSuz",uploadLabel:"page_uploadLabel__3b4XN",fileInput:"page_fileInput__ndibQ",uploadBtn:"page_uploadBtn__Ghf4O",success:"page_success__wK9AJ",infoText:"page_infoText__WEbT3",errorBox:"page_errorBox__Zrt_3",previewSection:"page_previewSection__BL4tO",previewImage:"page_previewImage__CIkTb",noImage:"page_noImage__52vm3"}}},function(e){e.O(0,[491,609,448,971,117,744],function(){return e(e.s=8079)}),_N_E=e.O()}]);